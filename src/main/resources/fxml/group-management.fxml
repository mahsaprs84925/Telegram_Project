<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.telegram.controllers.GroupManagementController">
   <center>
      <VBox spacing="20.0" styleClass="main-container">
         <children>
            <!-- Group Header -->
            <VBox alignment="CENTER" spacing="15.0" styleClass="header-container">
               <children>
                  <StackPane>
                     <Circle fx:id="groupImageCircle" fill="#E0E0E0" radius="50.0" stroke="#CCCCCC" strokeWidth="2.0" />
                     <ImageView fx:id="groupImageView" fitHeight="100.0" fitWidth="100.0" preserveRatio="true" visible="false">
                        <clip>
                           <Circle radius="50.0" />
                        </clip>
                     </ImageView>
                     <Button fx:id="changeGroupPictureButton" onAction="#handleChangeGroupPicture" styleClass="camera-button" text="ðŸ“·" StackPane.alignment="BOTTOM_RIGHT" />
                  </StackPane>
                  <Label fx:id="groupNameLabel" styleClass="page-title" text="Group Name" />
                  <Label fx:id="memberCountLabel" styleClass="field-label" text="0 members" />
               </children>
            </VBox>
            
            <!-- Group Information -->
            <TabPane fx:id="groupTabPane" tabClosingPolicy="UNAVAILABLE">
               <tabs>
                  <!-- Info Tab -->
                  <Tab text="Info">
                     <content>
                        <VBox spacing="15.0" styleClass="content-container">
                           <children>
                              <VBox spacing="8.0">
                                 <children>
                                    <Label styleClass="field-label" text="Group Name:" />
                                    <TextField fx:id="groupNameField" styleClass="input-field" promptText="Group name" />
                                 </children>
                              </VBox>
                              
                              <VBox spacing="8.0">
                                 <children>
                                    <Label styleClass="field-label" text="Description:" />
                                    <TextArea fx:id="descriptionField" styleClass="input-field" maxHeight="100.0" prefRowCount="4" promptText="Group description..." wrapText="true" />
                                 </children>
                              </VBox>
                              
                              <CheckBox fx:id="privateGroupCheckBox" styleClass="form-checkbox" text="Private group (invite only)" />
                              
                              <VBox spacing="8.0">
                                 <children>
                                    <Label styleClass="field-label" text="Group Type:" />
                                    <ComboBox fx:id="groupTypeComboBox" styleClass="input-field" prefWidth="200.0">
                                       <items>
                                          <String fx:value="Public Group" />
                                          <String fx:value="Private Group" />
                                          <String fx:value="Study Group" />
                                          <String fx:value="Work Group" />
                                          <String fx:value="Friends" />
                                          <String fx:value="Family" />
                                       </items>
                                    </ComboBox>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                     </content>
                  </Tab>
                  
                  <!-- Members Tab -->
                  <Tab text="Members">
                     <content>
                        <VBox spacing="10.0" styleClass="content-container">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <TextField fx:id="searchMembersField" styleClass="input-field" promptText="Search members..." HBox.hgrow="ALWAYS" />
                                    <Button fx:id="addMemberButton" onAction="#handleAddMember" styleClass="primary-action-button" text="Add Member" />
                                 </children>
                              </HBox>
                              
                              <ListView fx:id="membersListView" styleClass="list-view" prefHeight="200.0" />
                           </children>
                        </VBox>
                     </content>
                  </Tab>
                  
                  <!-- Permissions Tab -->
                  <Tab text="Permissions">
                     <content>
                        <VBox spacing="15.0" styleClass="content-container">
                           <children>
                              <Label styleClass="section-title" text="Group Permissions" />
                              
                              <CheckBox fx:id="allCanSendMessagesCheckBox" styleClass="form-checkbox" selected="true" text="All members can send messages" />
                              <CheckBox fx:id="allCanAddMembersCheckBox" styleClass="form-checkbox" text="All members can add new members" />
                              <CheckBox fx:id="allCanChangeInfoCheckBox" styleClass="form-checkbox" text="All members can change group info" />
                              <CheckBox fx:id="allCanPinMessagesCheckBox" styleClass="form-checkbox" text="All members can pin messages" />
                              
                              <Separator />
                              
                              <Label styleClass="section-title" text="Admin Settings" />
                              <ListView fx:id="adminsListView" styleClass="list-view" prefHeight="100.0" />
                              <Button fx:id="promoteToAdminButton" onAction="#handlePromoteToAdmin" styleClass="secondary-action-button" text="Promote Selected to Admin" />
                           </children>
                        </VBox>
                     </content>
                  </Tab>
               </tabs>
            </TabPane>
            
            <!-- Action Buttons -->
            <HBox alignment="CENTER" spacing="15.0" styleClass="button-container">
               <children>
                  <Button fx:id="saveGroupButton" onAction="#handleSaveGroup" styleClass="primary-action-button" text="Save Changes" />
                  <Button fx:id="cancelGroupButton" onAction="#handleCancel" styleClass="secondary-action-button" text="Cancel" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Button fx:id="leaveGroupButton" onAction="#handleLeaveGroup" styleClass="warning-button" text="Leave Group" />
                  <Button fx:id="deleteGroupButton" onAction="#handleDeleteGroup" styleClass="danger-button" text="Delete Group" />
               </children>
            </HBox>
         </children>
      </VBox>
   </center>
</BorderPane>
